!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.gql=t()}(this,function(){"use strict";function e(e,t){var r=t.map(function(e){return e.request});1===r.length&&(r=r[0]),e.fetcher(r).then(function(e){if(1===t.length&&!Array.isArray(e))return e.errors&&e.errors.length?void t[0].reject(e):void t[0].resolve(e);if(e.length!==t.length)throw new Error("response length did not match query length");for(var r=0;r<t.length;r++)e[r].errors&&e[r].errors.length?t[r].reject(e[r]):t[r].resolve(e[r])})}function t(t,r){var n=t._queue,o=r.maxBatchSize||0;if(t._queue=[],o>0&&o<n.length)for(var i=0;i<n.length/o;i++)e(t,n.slice(i*o,(i+1)*o));else e(t,n)}var r=function(e,t){void 0===t&&(t={});var r=t.batchInterval;void 0===r&&(r=6);var n=t.shouldBatch;void 0===n&&(n=!0);var o=t.maxBatchSize;void 0===o&&(o=0),this.fetcher=e,this._options={batchInterval:r,shouldBatch:n,maxBatchSize:o},this._queue=[]};return r.prototype.fetch=function(e,r,n,o){var i=this;void 0===o&&(o={});var u={query:e},s=Object.assign({},this._options,o);return r&&(u.variables=r),n&&(u.operationName=n),new Promise(function(e,r){i._queue.push({request:u,resolve:e,reject:r}),1===i._queue.length&&(s.shouldBatch?setTimeout(function(){return t(i,s)},s.batchInterval):t(i,s))})},r.prototype.forceFetch=function(e,n,o,i){var u=this;void 0===i&&(i={});var s={query:e},a=Object.assign({},this._options,i,{shouldBatch:!1});return n&&(s.variables=n),o&&(s.operationName=o),new Promise(function(e,n){var o=new r(u.fetcher,u._options);o._queue=[{request:s,resolve:e,reject:n}],t(o,a)})},r});