"use strict";function e(e,t){var r=t.map(function(e){return e.request});1===r.length&&(r=r[0]),e.fetcher(r).then(function(e){if(1===t.length&&!Array.isArray(e))return e.errors&&e.errors.length?void t[0].reject(e):void t[0].resolve(e);if(e.length!==t.length)throw new Error("response length did not match query length");for(var r=0;r<t.length;r++)e[r].errors&&e[r].errors.length?t[r].reject(e[r]):t[r].resolve(e[r])})}function t(t,r){var o=t._queue,n=r.maxBatchSize||0;if(t._queue=[],n>0&&n<o.length)for(var i=0;i<o.length/n;i++)e(t,o.slice(i*n,(i+1)*n));else e(t,o)}var r=function(e,t){void 0===t&&(t={});var r=t.batchInterval;void 0===r&&(r=6);var o=t.shouldBatch;void 0===o&&(o=!0);var n=t.maxBatchSize;void 0===n&&(n=0),this.fetcher=e,this._options={batchInterval:r,shouldBatch:o,maxBatchSize:n},this._queue=[]};r.prototype.fetch=function(e,r,o,n){var i=this;void 0===n&&(n={});var s={query:e},a=Object.assign({},this._options,n);return r&&(s.variables=r),o&&(s.operationName=o),new Promise(function(e,r){i._queue.push({request:s,resolve:e,reject:r}),1===i._queue.length&&(a.shouldBatch?setTimeout(function(){return t(i,a)},a.batchInterval):t(i,a))})},r.prototype.forceFetch=function(e,o,n,i){var s=this;void 0===i&&(i={});var a={query:e},h=Object.assign({},this._options,i,{shouldBatch:!1});return o&&(a.variables=o),n&&(a.operationName=n),new Promise(function(e,o){var n=new r(s.fetcher,s._options);n._queue=[{request:a,resolve:e,reject:o}],t(n,h)})},module.exports=r;